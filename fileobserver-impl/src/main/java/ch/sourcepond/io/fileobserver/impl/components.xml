<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

    <bean id="observerExecutorServiceFactory" class="ch.sourcepond.io.fileobserver.impl.ExecutorServiceFactory">
        <argument ref="OSGi_service.smartSwitch" />
    </bean>

    <!-- No destroy-method necessary here, shutdown is managed by SmartSwitch -->
    <bean id="observerExecutor" factory-ref="observerExecutorServiceFactory" factory-method="getObserverExecutor" />

    <!-- No destroy-method necessary here, shutdown is managed by SmartSwitch -->
    <bean id="directoryWalkerExecutor" factory-ref="observerExecutorServiceFactory" factory-method="getDirectoryWalkerExecutor" />

    <bean id="watchedDirectoryManager" class="ch.sourcepond.io.fileobserver.impl.WatchedDirectoryManager">
        <argument ref="directory.directories" />
    </bean>
</blueprint>